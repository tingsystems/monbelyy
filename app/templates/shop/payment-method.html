<div id="content-area">
    <div class="container" ng-controller="AddressCtrl as Address">
        <div class="col-md-6 address-form">
            <div class="col-md-12 select-address" style="margin-bottom: 20px" ng-if="idUser">
                <h3><a href="" ng-click="Payment.showAddress=!Payment.showAddress"><i class="fa fa-address-card"></i></a> Seleccionar dirección existente</h3>
                <ng-include ng-if="Payment.showAddress" src="'/templates/shop/shipping-address.html'"></ng-include>
            </div>
            <div class="col-md-12">
                <h3><i class="fa fa-paper-plane"></i> Nueva direccíon de envío</h3>
                <form action="" class="form-horizontal" name="Form" novalidate ng-submit="Payment.shippingProccess()">
                    <div class="col-md-6">
                        <div class="form-item">
                            <label for="state">Estado</label>
                            <ui-select on-select="Address.getCitiesByState($model)"
                                       title="Estado" ng-model="Address.formData.state"
                                       name="states"
                                       id="state" required>
                                <ui-select-match placeholder="Selecciona un Estado *..."
                                                 allow-clear="true">
                                    {{$select.selected.name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="state.id as state in Address.states | filter: {name: $select.search}">
                                    <div ng-bind-html="state.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-item">
                            <label for="city">Ciudad</label>
                            <ui-select ng-model="Address.formData.city" id="city" name="cities"
                                       ng-required="Address.formData.state" ng-disabled="Address.busyCity"
                                       title="Ciudad" required>
                                <ui-select-match placeholder="Selecciona una Ciudad *..." allow-clear="true">
                                    {{$select.selected.name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="city.id as city in Address.cities | filter: {name: $select.search}">
                                    <div ng-bind-html="city.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>

                    </div>
                    <div class="col-md-12">
                        <div class="form-item"
                             ng-class="{ 'has-error': Form.address.$touched && Form.address.$invalid }">
                            <label for="address">Dirección</label>
                            <input ng-model="Address.formData.address" type="text"
                                   class="form-control" id="address" name="address"
                                   placeholder="Dirección"
                                   required>
                            <span ng-messages="Form.address.$error" ng-if="Form.address.$touched">
                                <a ng-message="required" data-toggle="tooltip" title="Holiis"></a>
                            </span>
                        </div>
                    </div>
                    <div class="col-xs-12 col-md-8">
                        <div class="form-item"
                             ng-class="{ 'has-error': Form.neighborhood.$touched && Form.neighborhood.$invalid }">
                            <label for="neighborhood">Colonia</label>
                            <input ng-model="Address.formData.neighborhood" type="text" class="form-control"
                                   id="neighborhood"
                                   name="neighborhood"
                                   placeholder="Colonia"
                                   required>
                        </div>
                    </div>
                    <div class="col-xs-12 col-md-4">
                        <div class="form-item" ng-class="{ 'has-error': Form.zip.$touched && Form.zip.$invalid }">
                            <label for="zip">Código Postal</label>
                            <input ng-model="Address.formData.zip" type="text" ng-pattern="/^[0-9]{5}$/" maxlength="5"
                                   class="form-control" id="zip" name="zip"
                                   placeholder="Código Postal"
                                   required>
                        </div>
                    </div>
                    <div class="col-xs-12 col-md-6">
                        <div class="form-item" ng-class="{ 'has-error': Form.phone.$touched && Form.phone.$invalid }">
                            <label for="phone">Teléfono</label>
                            <input ng-model="Address.formData.phone" type="text" maxlength="20" class="form-control"
                                   id="phone"
                                   name="phone"
                                   placeholder="Teléfono" required>
                        </div>

                    </div>
                    <div class="col-xs-12 col-md-6">
                        <div class="form-item" ng-class="{ 'has-error': Form.mobile.$touched && Form.mobile.$invalid }">
                            <label for="mobile">Celular</label>
                            <input ng-model="Address.formData.mobile" type="text" ng-maxlength="20" class="form-control"
                                   id="mobile"
                                   name="mobile"
                                   placeholder="Celular" required>
                        </div>

                    </div>
                    <div class="col-md-12" ng-if="idUser">
                        <input type="checkbox"><span>Guardar mi información para la aproxima ocasión</span>
                        {{Payment.saveAddressNew}}
                    </div>
                </form>
            </div>
            <div class="col-md-12 text-center" style="margin-top: 20px">
                <div class="col-md-6"><a href="" ui-sref="shopcart">Regresar al carrito</a></div>
                <div class="col-md-6" ng-controller="OrderCtrl as Order">
                    <button class="btn btn-cart" ng-disabled="Form.$invalid" ng-click="Order.createOrder()">Continuar</button>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <ng-include src="'/templates/shop/partials/cart-details.html'"></ng-include>
        </div>
    </div>
</div>

